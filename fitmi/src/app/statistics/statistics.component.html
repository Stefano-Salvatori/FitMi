<ion-header color="primary">
  <ion-toolbar color="primary">
    <ion-title>Statistics</ion-title>
  </ion-toolbar>
</ion-header>

<!-- Out of ion-content to keep it fixed at top-->
<!-- Segment with default selection -->
<ion-segment (ionChange)="segmentChanged($event)" value="last">
  <ion-segment-button value="last">
    <ion-label>Last</ion-label>
  </ion-segment-button>
  <ion-segment-button value="month">
    <ion-label>Month</ion-label>
  </ion-segment-button>
  <ion-segment-button value="year">
    <ion-label>Year</ion-label>
  </ion-segment-button>
</ion-segment>
<ion-content ion-justify-content-center>

  <div *ngIf="timePeriod==='last'; then thenBlock else elseBlock"></div>

  <!-- LAST staticstics template-->

  <ng-template #thenBlock >
    <ion-card>
      <ion-item>
        <ion-icon name="md-calendar" slot="start"></ion-icon>
        <ion-label>{{ lastSessionDate() }}</ion-label>
      </ion-item>
    </ion-card>

        <ion-card>
          <ion-item>
            <ion-icon name="md-time" slot="start"></ion-icon>
            <ion-label>{{ lastSessionDuration() }}</ion-label>
          </ion-item>
        </ion-card>



    <ion-grid align-items-center justify-content-center>
      <ion-row justify-content-center>
        <ion-col size="12">
          <h2>Heart Rate</h2>
          <div id="heartRateLineChart">
            {{ initHeartRateLineChart() }}
          </div>
        </ion-col>
      </ion-row>
      <ion-row size="12" justify-content-center>
        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ minHeartRate() }} bpm</h2>
            <h4 class="label">Min Heart Rate</h4>
          </ion-text>
        </ion-col>

        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ maxHeartRate() }} bpm</h2>
            <h4 class="label">Max Heart Rate</h4>
          </ion-text>
        </ion-col>
      </ion-row>
      <ion-row size="12" justify-content-center>
        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ lastSession.type }}</h2>
            <h4 class="label">Type</h4>
          </ion-text>
        </ion-col>
        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ lastSession.pedometer.calories }} kcal</h2>
            <h4 class="label">Calories</h4>
          </ion-text>
        </ion-col>
      </ion-row>

      <ion-row size="12" justify-content-center>
        <ion-col size="6">

          <ion-text>
            <h2 class="value">{{ lastSession.pedometer.steps }}</h2>
            <h4 class="label">Steps</h4>
          </ion-text>
        </ion-col>
        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ lastSession.pedometer.distance }} m</h2>
            <h4 class="label">Distance</h4>
          </ion-text>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ng-template>

  <!-- GENERAL staticstics template-->
  <ng-template #elseBlock>
    <ion-card>
        <ion-item>
          <ion-icon slot="start" name="md-fitness"></ion-icon>
          <ion-label>Sessions this {{ timePeriod }}: {{ getAllSessionsInSelectedPeriod().length }}</ion-label>
        </ion-item>
    </ion-card>
  

    <ion-grid align-items-center justify-content-center>
      <ion-row justify-content-center>
        <ion-col>
          <ion-card>
            
          </ion-card>
          <h2>Calories</h2>
          <div id="caloriesBarChart">
            {{ initCaloriesBarChart() }}
          </div>
        </ion-col>
      </ion-row>
      <ion-row size="12" justify-content-center>
        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ favoriteSessionType() }}</h2>
            <h4 class="label">Favorite Session</h4>
          </ion-text>
        </ion-col>
        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ allCalories() }} kCal</h2>
            <h4 class="label"> Total Calories</h4>
          </ion-text>
        </ion-col>
      </ion-row>

      <ion-row size="12" justify-content-center>
        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ allSteps() }}</h2>
            <h4 class="label">Total Steps</h4>
          </ion-text>
        </ion-col>
        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ allDistance() }} m</h2>
            <h4 class="label">Total Distance</h4>
          </ion-text>
        </ion-col>
      </ion-row>

      <ion-row size="12" justify-content-center>
        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ allSteps() }}</h2>
            <h4 class="label">Total Steps</h4>
          </ion-text>
        </ion-col>
        <ion-col size="6">
          <ion-text>
            <h2 class="value">{{ wholeTimeSpentOnSessions() }} </h2>
            <h4 class="label">Time On Session</h4>
          </ion-text>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ng-template>


</ion-content>